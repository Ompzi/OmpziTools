local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

local function createESP(character)
    local highlight = Instance.new("Highlight")
    highlight.Adornee = character
    highlight.FillColor = Color3.new(255, 255, 255) -- 	Colour Of Esp
    highlight.FillTransparency = 0 -- Transparency level
    highlight.OutlineColor = Color3.new(1, 1, 1) -- Outline Of Esp
    highlight.OutlineTransparency = 1 -- Transparency Of Esp
    highlight.Parent = character
end

local function handlePlayer(player)
    player.CharacterAdded:Connect(function(character)
        createESP(character)
    end)

    -- Create ESP for the player's current character if it exists
    if player.Character then
        createESP(player.Character)
    end
end

-- Connect to new players joining the game
Players.PlayerAdded:Connect(handlePlayer)

-- Handle existing players
for _, player in ipairs(Players:GetPlayers()) do
    handlePlayer(player)
end
